<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>苏宁易购-苏宁云商网上商城，领先的综合网上购物商城，正品行货，全国联保，货到付款，让您尽享购物乐趣！</title>
    <link rel="shortcut icon" href="https://passport.suning.com/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/register.css">
</head>

<body>
    <section class="head">
        <section class="banxin head">
            <h1>苏宁易购<a href="./index.html"><img src="https://image1.suning.cn/uimg/cms/img/159642507148437980.png"
                        alt="苏宁易购"></a></h1>
            <h2>欢迎注册</h2>
            <a href="./login.html">我已注册,马上登录》</a>
        </section>
    </section>
    <section id="main">
        <section class="main banxin">
            <form action="" id="regfrom">
                <p>注册领<span>199</span>元大礼包</p>
                <div>
                    <i>手机号码</i><input type="text" name="" id="phone">
                    <h4 class="phoneh4">请输入您的手机号码</h4>
                </div>
                <div>
                    <i>手机验证码</i><input type="text" name="" id="yzm" class="yzm"><button id="hqyzm">获取短信验证码</button>
                    <h4 class="yzmh4">请输入您的手机号码</h4>
                </div>
                <div>
                    <i>设置密码</i><input type="password" name="" id="zcpwd">
                    <h4 class="zcpwdh4">请输入您的手机号码</h4>
                </div>
                <input type="submit" id="tijiao" value="提交注册">
                <h5><a href="#">企业用户注册》</a></h5>
            </form>
        </section>
    </section>
    <section id="footbq">
        <section class="footbq banxin">
            <p class="footp1"><a href="#">苏宁互联</a>|<a href="#">苏宁金融</a>|<a href="#">苏宁支付</a>|<a href="#">PP视频</a>|<a
                    href="#">红孩子</a>|<a href="#">苏宁物流</a>|<a href="#">手机苏宁</a>|<a href="#">零售云</a>|<a
                    href="#">苏宁云</a>|<a href="#">知识产权举报</a>|<a href="#">投资者关系</a>|<a href="#">苏宁智能</a></p>
            <p class="footp1"><a href="#">联系我们</a>|<a href="#">诚聘英才</a>|<a href="#">合作招商</a>|<a href="#">广告平台</a>|<a
                    href="#">苏宁联盟</a>|<a href="#">苏宁招标</a>|<a href="#">隐私政策</a>|<a href="#">用户体验提升计划</a>|<a
                    href="#">股东会员认证</a></p>
            <p>Copyright@
                2002-2020，苏宁易购集团股份有限公司版权所有&nbsp;&nbsp;│&nbsp;&nbsp;苏公网安备32010202010078号&nbsp;&nbsp;│&nbsp;&nbsp;苏ICP备10207551号-4
            </p>
            <p>合字B2-20180025|合字A1.B1.B2-20180017&nbsp;&nbsp;|&nbsp;&nbsp;出版物经营许可证新出发苏批字第A-243号&nbsp;&nbsp;│&nbsp;&nbsp;互联网药品信息服务资格证书(苏)-非经营性-2016-0005
            </p>
            <p>经营证照&nbsp;&nbsp;│&nbsp;&nbsp;网络文化经营许可证:苏网文(2018〕10580-203号&nbsp;&nbsp;│&nbsp;&nbsp;互联网违法和不良信息举报邮箱:
                k6pt-yy@cnsuning.com &nbsp;&nbsp;│&nbsp;&nbsp;举报电话:0256699569-865948</p>
            <p>医疗器械网络交易服务第三方平台备案凭证-(苏)网械平台备字(2018）第00052号</p>
            <p>本网站直接或间接向消费者推销商品或者服务的商业宣传均属于“广告”(包装及参数、售后保障等商品信息除外)</p>
            <p>
                <img src="https://res.suning.cn/public/v3/images/wxrz.png" alt="">
                <img src="https://res.suning.cn/public/v3/images/chengxin.png" alt="">
                <img src="https://res.suning.cn/public/v3/images/unicom.png" alt="">
                <img src="https://res.suning.cn/public/v3/images/dianxin.jpg" alt="">
                <img src="https://res.suning.cn/public/v3/images/dianzizhizhao.png?v=01" alt="">
                <img src="https://res.suning.cn/public/v3/images/netsafe1.png?v=01" alt="">
                <img src="https://res.suning.cn/public/v3/images/netsafe2.png?v=01" alt="">
                <img src="https://res.suning.cn/public/v3/images/netsafe3.png?v=01" alt="">
            </p>
        </section>
    </section>
</body>
<script src="../js/jquery1.12.4.min.js"></script>
<script src="../js/public.js"></script>
<script>
    var phoneInp = document.getElementById('phone');
    // 手机号正则检测
    phoneInp.oninput = checkUsername;

    function checkUsername() {
        var reg = /^\d{11}$/
        var phoneVal = $('#phone').val();
        if (reg.test(phoneVal)) {
            $('.phoneh4').html("手机号码正确");
            $('.phoneh4').css({ color: "green", display: "block" })
            return true;
        } else {
            $('.phoneh4').html("请输入正确的手机号码")
            $('.phoneh4').css({ color: "red", display: "block" })
            return false;
        }
    }
    // 验证码正则检测
    var yzmInp = document.getElementById('yzm');
    yzmInp.oninput = checkUseryzm;
    function checkUseryzm() {
        var reg = /^\d{6}$/
        var yzmVal = $('#yzm').val();
        if (reg.test(yzmVal)) {
            $('.yzmh4').html("验证码正确");
            $('.yzmh4').css({ color: "green", display: "block" })
            return true;
        } else {
            $('.yzmh4').html("请输入正确的6位验证码")
            $('.yzmh4').css({ color: "red", display: "block" })
            return false;
        }
    }
    // 密码正则检测
    var zcpwdInp = document.getElementById('zcpwd');
    zcpwdInp.oninput = checkUserzcpwd;
    function checkUserzcpwd() {
        var zcpwdVal = $('#zcpwd').val();
        if (/^[\w~!@#]{8,12}$/.test(zcpwdVal) && /\d+/.test(zcpwdVal) && /[A-Z]+/.test(zcpwdVal) && /[a-z]+/.test(password)) {
            // 高强度密码
            $('.zcpwdh4').html("密码强度高")
            $('.zcpwdh4').css({ color: "green", display: "block" })
            return true;
        }
        if (/^[\w~!@#]{8,12}$/.test(zcpwdVal)) {
            // 低强度密码
            $('.zcpwdh4').html("密码强度低")
            $('.zcpwdh4').css({ color: "green", display: "block" })
            return true;
        } else {
            // 密码不合法
            $('.zcpwdh4').html("密码必须是8-12的字母,数字或者特殊符号")
            $('.zcpwdh4').css({ color: "red", display: "block" })
            return false;
        }
    }
    // 注册成功的
    var form = document.getElementById('regfrom')
    form.onsubmit = function (e) {
        e = e || window.event;
        if (checkUsername() && checkUseryzm() && checkUserzcpwd()) {
            $.ajax({
                url: "../api/register.json",
                data: {
                    un: $('#phone').val(),
                    pw: $('#zcpwd').val()
                },
                dataType: 'json',
                success: function (res) {
                    if (res.code == 1) {
                        // 注册成功，信息添加到本地存储，方便同域名下的其他页面访问
                        localStorage.setItem($('#phone').val(), $('#zcpwd').val());
                        location.href = "./login.html"
                    }
                }
            })

        } else {
            e.preventDefault ? e.preventDefault() : e.returnValue = false;
            // 用户名和密码是不合法的，阻止提交
        }
    }

</script>

</html>